<div class="pr-list-container container">
  <div class="page-header">
    <h1>Pull Requests</h1>
    <p class="subtitle">Automated fixes created by the system</p>
  </div>

  <div *ngIf="loading" class="text-center">
    <div class="spinner"></div>
  </div>

  <div *ngIf="!loading && prs.length === 0" class="card">
    <div class="empty-state">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" opacity="0.3">
        <path d="M16 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V8l-5-5z" stroke-width="2"/>
        <polyline points="9 12 11 14 15 10" stroke-width="2"/>
      </svg>
      <p>No pull requests yet</p>
      <a routerLink="/errors" class="btn btn-primary">Diagnose Errors</a>
    </div>
  </div>

  <div class="prs-grid" *ngIf="!loading && prs.length > 0">
    <div class="card pr-card fade-in" *ngFor="let pr of prs">
      <div class="pr-header">
        <div class="pr-number">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="18" cy="18" r="3" stroke-width="2"/>
            <circle cx="6" cy="6" r="3" stroke-width="2"/>
            <path d="M18 9a9 9 0 01-9 9" stroke-width="2"/>
          </svg>
          <span class="badge badge-success">#{{ pr.prNumber }}</span>
        </div>
        <span class="pr-status" [class.status-open]="pr.status === 'open'">{{ pr.status }}</span>
      </div>

      <div class="pr-content">
        <h3>{{ pr.title }}</h3>
        <p class="pr-description">{{ pr.body }}</p>

        <div class="pr-meta">
          <div class="meta-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M9 11l3 3L22 4" stroke-width="2"/>
              <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11" stroke-width="2"/>
            </svg>
            <span>{{ pr.branch }}</span>
          </div>
          <div class="meta-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" stroke-width="2"/>
            </svg>
            <span>{{ pr.filesChanged }} {{ pr.filesChanged === 1 ? 'file' : 'files' }} changed</span>
          </div>
          <div class="meta-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10" stroke-width="2"/>
              <polyline points="12 6 12 12 16 14" stroke-width="2"/>
            </svg>
            <span>{{ pr.createdAt | date:'short' }}</span>
          </div>
        </div>
      </div>

      <div class="pr-actions">
        <a [href]="pr.prUrl" target="_blank" class="btn btn-primary">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6" stroke-width="2"/>
            <polyline points="15 3 21 3 21 9" stroke-width="2"/>
            <line x1="10" y1="14" x2="21" y2="3" stroke-width="2"/>
          </svg>
          View on GitHub
        </a>
      </div>
    </div>
  </div>
</div>
